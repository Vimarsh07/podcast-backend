
build:
  python_version: "3.10"
  python_requirements: "requirements.txt"
  system_packages:
    - ffmpeg
    - libsndfile1
    - git
    - "libopenblas-dev"
  run:
    - mkdir -p /root/.cache/huggingface
    - echo "HF_HOME=/root/.cache/huggingface" >> /etc/environment
    - pip install pyannote.audio
     # debug: confirm your files are in /src
    - sh -lc "pwd; ls -la /src"
    # run the preload script from the container copy
    - python /tmp/preload_pyannote.py

  gpu: true

predict: "transcriber.py:transcribe"
